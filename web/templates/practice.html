<!DOCTYPE html>
<html>
	<head>
		{% load static %}
		<meta name="mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<link rel="manifest" href="{% static 'manifest.json' %}">
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
    	<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>everytiān</title>
		<link rel="stylesheet" type="text/css" href="{% static 'practice.css' %}">
	</head>
	<body>
		<nav>
			<div id="top-level">
				<ul>
					<li>everytiān</li>
					<li><a href="{% url 'practice' %}">Practice</a></li>
					<li><a href="{% url 'favorites' %}">Favorites</a></li>
					<li><a href="{% url 'evolution' %}">Evolution</a></li>
					<li><a href="{% url 'settings' %}">Settings</a></li>
				</ul>

			</div>
		</nav>
		<form method="POST" action="{% url 'practice' %}">
			{% csrf_token %}
			<input name="resource_id" type="hidden" value="{{ resource_id }}">
			<section class="section-actions">
				<div id="resource-level">
					<ul>
						<li id="favorite">Favorite</li>
						<input name="favorite" type="checkbox" class="hidden">
						<li id="share">
							<a href="https://twitter.com/share" class="twitter-share-button" data-url="http://www.everytian.com" data-text="{{ tweet }}" data-hashtags="everytian">Tweet</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
						</li>
						<li id="translate">Translate</li>
					</ul>
				</div>
			</section>
			{% if audio > 0 %}
			<audio controls autoplay>
			  <source src="https://audio.tatoeba.org/sentences/cmn/{{ audio }}.mp3" type="audio/mpeg">
			Your browser does not support audio!
			</audio>
			{% endif %}
			<div class="text">
				{% for word in text %}
					<div class="word">
						<div class="hanzi">{{ word.hanzi }}</div>
						<input name="unknown" type="checkbox" value="{{ word.hanzi }}" class="hidden">
						<span class="pronunciation" style="display: none;">{{ word.pinyin }}</span>
					</div>
				{% endfor %}
				<div id="translation">{{ translation }}</div>
			</div>
			
			<div class="explain-box" style="display: none;">
				<div class="word"></div>
				<div class="pronunciation"></div>
				<ul class="definition"></ul>
			</div>
			<div>
			<input id="next" type="submit" value="NEXT">
			</div>
		</form>
		<div id="corrector"></div>
		<script src="../static/jquery-3.1.1.min.js"></script>
		<script src="../static/notify.min.js"></script>
		<script>
			{% autoescape off %}
				var dict = {{ word_definitions }};
			{% endautoescape %}

			{% for learned_word in learned %}
				$.notify("you learned {{ learned_word }}!", "success")
			{% endfor %}
			{% for forgotten_word in forgotten %}
				$.notify("you forgotten {{ forgotten_word }}!", "error")
			{% endfor %}
			{% for discov_known_word in discov_known %}
				$.notify("{{ discov_known_word }} added to your known dictionary", "info")
			{% endfor %}
			{% for discov_unknown_word in discov_unknown %}
				$.notify("{{ discov_unknown_word }} added to your unknown dictionary", "warn")
			{% endfor %}
		</script>
		<script type="text/javascript" src="{% static 'practice.js' %}"></script>
	</body>
</html>